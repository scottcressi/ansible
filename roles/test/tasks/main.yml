---
# tasks file for test

- name: create dir
  file:
    path: /tmp/some_directory
    state: directory
    mode: 0755

- name: create file
  copy:
    dest: /tmp/some_file
    content: |
      dog1
      tiger

# https://docs.ansible.com/ansible/latest/collections/community/general/hashi_vault_lookup.html#examples
- name: set vault secret
  ansible.builtin.set_fact:
    my_secrets: "{{ lookup('community.general.hashi_vault',
    'secret=secret/data/hello
    token={{ vault_token }}
    url=http://{{ vault_server }}:8200') }}"

- name: print vault secret
  copy:
    dest: /tmp/some_file_vault
    content: |
      {{ my_secrets['foo'] }}
